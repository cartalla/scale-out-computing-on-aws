<!DOCTYPE html>
<html lang="en">

<head>
     {% include 'common/header.html' %}

    <script src="{{ url_for('static', filename='vendor/jquery-formbuilder/form-render.min.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/jquery-ui/jquery-ui.min.js') }}"></script>
</head>

<body id="page-top">

  <div id="wrapper">
    {% include 'common/vertical_menu_bar.html' %}
    <div id="content-wrapper" class="d-flex flex-column">
      <div id="content">
          <br>
          <div class="container-fluid">
              {% include 'common/horizontal_menu_bar.html' %}
              <main role="main">
              {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            {% for category, message in messages %}
                                <br>
                                {% if category == "success" %}
                                <div class="alert alert-success">
                                    <strong>{{ message | safe }} </strong>
                                </div>
                                {% else %}
                                 <div class="alert alert-danger">
                                    <strong>{{ message | safe }} </strong>
                                </div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endwith %}

                  <div class="row">
                      <div class="card shadow mb-4" style="width: 100%">
                          <div class="card-header py-3">
                              <h6 class="m-0 font-weight-bold text-primary">Launching your {{ profile_name }} simulation </h6>
                          </div>
                          <div class="card-body">
                              <form action="/submit_job/send" method="post">
                                  <div class="form-build"></div>
                                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                  <input type="hidden" name="job_script" value="{{ profile_job }}">
                                  <button type="submit" class="btn btn-success"><i class="fas fa-play"></i> Submit job</button>
                                  <button type="button" data-toggle="modal" data-target="#costModal"  class="btn btn-info"><i class="fas fa-search-dollar"></i> Cost Estimate</button>
                              </form>
                          </div>
                      </div>
                      <script>
                          jQuery($ => {
                                formBuilder = $('.form-build').formRender({
                                     dataType: 'json',
                                    formData: {{ profile_form | safe }}
                                })
                           })
                      </script>
                  </div>

              </main>
            <!-- Modal -->
<div class="modal fade" id="costModal" tabindex="-1" role="dialog" aria-labelledby="costModal" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Estimate your job cost</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <form id="form_calc">
              <div class="form-group">
                  <label for="exampleInputEmail1">Type of compute</label>
                  <input type="text" class="form-control" id="instance" aria-describedby="emailHelp" placeholder="">
              </div>
              <div class="form-group">
                  <label for="exampleInputEmail1">Do your need storage? Enter the total size requested in GB</label>
                  <input type="text" class="form-control" id="instance" aria-describedby="emailHelp" placeholder="Storage to provision in GB">
              </div>
              <div class="form-group">
                  <label for="exampleFormControlSelect1">Using FSx?</label>
                  <select class="form-control" id="exampleFormControlSelect1">
                      <option>No</option>
                      <option>Scratch 2</option>
                      <option>Scratch 1</option>
                      <option>Persistent</option>
                  </select>
              </div>
               <div class="form-group">
                  <label for="exampleInputEmail1">How long your job will be running (in minutes)</label>
                  <input type="text" class="form-control" id="instance" aria-describedby="emailHelp" placeholder="">
              </div>


          </form>

          <div class="progress">
              <div class="progress-bar bg-primary" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100">Compute</div>
              <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">Storage</div>
              <div class="progress-bar bg-danger" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">Others</div>
          </div>

          <hr>
          Disclaimer: This number is just an estimate.<br>
      </div>

    </div>
  </div>
</div>




              </div>
          </div>
      </div>

  </div>

  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>


    {% include 'common/footer.html' %}

</body>

</html>
